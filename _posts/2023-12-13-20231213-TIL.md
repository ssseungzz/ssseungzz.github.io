---
title: "2023 년 12 월 13일 TIL"
categories:
  - TIL
tags:
toc: true
toc_label: "Contents"
toc_sticky: true
---

#### 오늘 한 일

* 평화로운 하루인 줄 알았으나 저녁에 갑자기 장애가 발생했다.
* 처음에는 다른 권역 간 통신에 timeout이 걸려서 네트워크 문제인가 했는데, 자세히 보니 특정 API만 timeout이 발생했다.

  * 그 API는 구조 개선을 하느라 호출부와 수신부에서 이래저래 수정이 많은 API였다.
  * 알고 보니 원인은 옵션 처리를 빼먹는 바람에 호출해야 하지 않아야 하는 경우까지 API를 호출했고, 데이터 크기가 커서 수신 측에서 메모리 이슈가 발생하여 응답이 늦어지면서 timeout이 발생한 것이었다.
  * 비동기 처리도 약간 누락됨...

    

#### 느낀 점

* 기존 API의 구조를 개선할 때는 처리 로직은 당연한 거고 옵션과 비동기 처리 등을 빼먹지 말도록 하자.
  * 옵션은 그래도 비교적 알기 쉬운데, 비동기 처리의 경우 테스트망에서 눈치채기가 어려울 수 있어 더욱 주의가 필요할 듯함!
