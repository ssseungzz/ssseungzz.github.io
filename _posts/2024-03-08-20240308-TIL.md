---
title: "2024 년 3 월 8 일 TIL"
categories:
  - TIL
tags:
toc: true
toc_label: "Contents"
toc_sticky: true

---

#### 오늘 한 일

* 조회 기능 수정 - 카산드라는 파티션 키나 클러스터링 키에 속하지 않는 필드로 where 문을 작성하려면 `alter filtering` 구문을 추가해야 하며, 이는 성능에 유해한 영향을 미칠 수 있다............
* 이펙티브 자바 아이템 77(예외를 무시하지 말라) 읽기
  * 너무 당연한 이야기이긴 하다.
  * 혹시 예외를 무시하기로 했다면 `catch` 블록 안에 그렇게 결정한 이유를 주석으로 남기고 예외 변수의 이름도 `ignored`로 바꿔 놓도록 하자.
  
* 이펙티브 자바 아이템 78(공유 중인 가변 데이터는 동기화해 사용하라) 읽기
  * 여러 스레드가 가변 데이터를 공유한다면 그 데이터를 읽고 쓰는 동작은 반드시 동기화해야 한다. 가변 데이터는 단일 스레드에서만 쓰도록 하자.
  * 동기화는 배타적 실행(한 스레드가 변경하는 중이라서 상태가 일관되지 않은 순간의 객체를 다른 스레드가 보지 못하게 막는 것)뿐 아니라 스레드 사이의 안정적인 통신에 필요하다. 이는 한 스레드가 만든 변화가 다른 스레드에게 언제 어떻게 보이는지를 규정한 자바의 메모리 모델 때문이다. 쓰기와 읽기 모두가 동기화되지 않으면 동작을 보장하지 않는다.




#### 느낀 점

* 카산드라 쿼리를 수정해 보려다가 새삼스럽게 데이터 키를 잘 생각하고 정해야 한다는 것을 깨달았다. 메시지 조회인데 저장 시점을 클러스터링 키에 넣었어도 좋았을 텐데...... 