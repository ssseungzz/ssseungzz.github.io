---
title: "Modern Java in Action 12장; 새로운 날짜와 시간 API"
categories:
  - Language
tags:
  - java
toc: true
toc_label: "Contents"
toc_sticky: true
---

### 12. 새로운 날짜와 시간 API

#### 12.1 LocalDate, LocalTime, Instant, Duration, Period 클래스
##### 12.1.1 LocalDate와 LocalTime 사용
* `LocalDate` 인스턴스는 시간을 제외한 날짜를 표현하는 불변 객체로 어떤 시간대 정보도 포함하지 않는다. `of`라는 정적 팩토리 메서드로 만들 수 있다.
  * `get` 메서드로 날짜를 얻을 수 있고 시간 관련 객체에서 어떤 필드의 값에 접근할지 정의하는 인터페이스를 사용해 년도, 달 등을 따로 얻을 수 있다.
* 시간은 `LocalTime` 클래스로 표현할 수 있다. 시간과 분, 시간과 분과 초를 인수로 받는 팩토리 메서드 `of`가 있다.
* 두 메서드 모두 `parse` 정적 메서드를 이용해서 날짜와 시간 문자열로 인스턴스를 얻거나 `DateTimeFormatter`를 전달할 수도 있다.
  * 파싱 불가능할 시 예외를 일으킨다.

##### 12.1.2 날짜와 시간 조합
* `LocalDateTime`은 날짜와 시간을 모두 표현할 수 있다.

##### 12.1.3 Instant 클래스: 기계의 날짜와 시간
* `Instant` 클래스는 유닉스 에포크 시간을 기준으로 특정 지점까지의 시간을 초로 표현한다.
* 나노초 단위의 정밀도를 제공한다.
* 사람이 확인할 수 있도록 `now` 팩토리 메서드를 제공하지만 사람이 읽을 수 있는 시간 정보는 제공하지 않는다.

##### 12.1.4 Duration과 Period 정의
* 두 시간 객체 사이의 지속시간은 `Duration` 클래스로 표현한다.
* 정적 팩토리 메서드 `between`으로 두 시간 객체의 지속시간을 만들 수 있다.
* 초와 나노초로 시간 단위를 표현하므로 `LocalDate`를 전달할 수 없다.
  * 년, 월, 일로 시간을 표현할 때는 `Period` 클래스를 사용한다ㅏ.
* 두 클래스 모두 시간 객체를 사용하지 않고도 인스턴스를 만들 수 있도록 다양한 팩토리 메서드를 제공한다.

#### 12.2 날짜 조정, 파싱, 포매팅
##### 12.2.1 TemporalAdjusters 사용하기
* 세밀한 날짜 조정이 필요한 경우 `TemporalAdjusters`를 `with` 메서드에 전달할 수 있다.
  * 필요한 기능이 정의되어 있지 않을 때는 커스텀하게 구현할 수 있다.
  * `TemporalAdjusters` 인터페이스는 하나의 메서드만 정의된 함수형 인터페이스다. `Temporal` 객체를 다른 `Temporal` 객체로 변환하는 방법을 정의한다.
  * 즉, `UnaryOperator<Temporal>`로 간주할 수 있다.

##### 12.2.2 날짜와 시간 객체 출력과 파싱
* `DateTimeFormatter`의 정적 팩토리 메서드와 상수를 이용해서 손쉽게 포매터를 만들 수 있다.
  * 날짜나 시간을 특정 형식의 문자열로 만들 수 있다.
  * 반대로 날짜나 시간을 표현하는 문자열을 파싱해서 날짜 객체를 다시 만들 수 있다.
  * 스레드에서 안전하게 사용 가능하다.
  * 특정 패턴으로 포매터를 만들 수 있는 정적 팩토리 메서드도 제공한다.
* `LocalDate`의 `format` 메서드는 요청 형식의 패턴에 해당하는 문자열을 생성하며 정적 메서드 `parse`는 생성된 문자열을 파싱함으로써 다시 날짜를 생성한다.
* `DateTimeFormatterBuilder` 클래스로 복합적인 포매터를 정의해서 좀 더 세부적으로 포매터를 제어할 수 있다.

#### 12.3 다양한 시간대와 캘린터 활용 방법
##### 12.3.1 시간대 사용하기
* 표준 시간이 같은 지역을 묶어서 시간대 규칙 집합을 정의한다. 지역 ID는 {지역}/{도시} 형식으로 이루어진다.
* `TimeZone` 객체를 `ZoneId` 객체로 변환하고, `LocalDate`, `LocalDateTime`, `Instant`를 이용해서 `ZonedDateTime` 인스턴스로 변환할 수 있다. 이 객체는 지정한 시간대에 상대적인 시점을 표현한다.
* `ZoneId`를 이용해서 `LocalDateTime`을 `Instant`로 바꿀 수도 있다.

##### 12.3.2 UTC/Greenwich 기준의 고정 오프셋
* `ZoneId`의 서브클래스인 `ZoneOffset` 클래스로 런던의 그리니치 0도 자오선과 시간값의 차이를 표현할 수 있다.
* ISO-8601 캘린더 시스템에서 정의하는 UTC/GMT와 오프셋으로 날짜와 시간을 표현하는 `OffsetDateTime`을 만드는 방법도 있다.

##### 12.3.3 대안 캘린터 시스템 사용하기
* ISO-8601 캘린더 시스템 외에 `ThaiBuddhistDate`, `MinguoDate`, `JapaneseDate`, `HijrahDate`를 제공한다.
* 이들 클래스와 `LocalDate` 클래스는 `ChronoLocalDate` 인터페이스를 구현하는데 임의의 연대기에서 특정 날짜를 표현할 수 있는 기능을 제공하는 인터페이스이다.
* 특정 `Locale`에 대한 날짜 인스턴스로 캘린더 시스템을 만들 수 있다. `Chronology`는 클래스 시스템을 의미하며 정적 팩토리 메서드 `ofLocale`을 이용해서 `Chronology`의 인스턴스를 획득할 수 있다.

###### 이슬람력
* `HijrahDate` 캘린더 시스템은 태음월에 기초한다. 새로운 달을 결정할 때 그 달을 전 세계 어디에서나 볼 수 있는지 아니면 사우디아라비아에서 처음으로 새로운 달을 볼 수 있는지 등의 변형 방법을 결정하는 메서드가 있다.